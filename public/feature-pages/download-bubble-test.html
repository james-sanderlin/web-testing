<h2>ðŸ“¥ ServiceNow Download Test</h2>
<p>This page reproduces ServiceNow's tearOffAttachment download behavior to test custom download bubble issues.</p>

<div class="instructions">
    <h3>ðŸ§  Testing Instructions:</h3>
    <ol>
        <li><strong>Click the button below</strong> to open a popup that immediately downloads a file (like ServiceNow).</li>
        <li><strong>Test multiple times</strong> to reproduce the download bubble issue.</li>
        <li><strong>Observe:</strong> Watch where your custom download bubble appears and if it shows empty on subsequent downloads.</li>
        <li><strong>Check console</strong> for extension logs and error messages.</li>
    </ol>
</div>

<div class="test-section">
    <h3>âš¡ ServiceNow Auto-Download Test</h3>
    <p>Mimics ServiceNow's tearOffAttachment behavior - popup opens and immediately downloads a file.</p>
    <p>Downloads performed: <span class="counter" id="autoCounter">0</span></p>
    <button class="test-button auto-button" onclick="tearOffAutoDownload()">Test ServiceNow Download</button>
</div>

<div class="test-section">
    <h3>ðŸ“Š Test Results</h3>
    <div id="testResults">
        <p>Open browser console to see detailed logs. Extension logs will help identify the issue.</p>
        <p><strong>What to look for:</strong></p>
        <ul>
            <li>First download: bubble appears correctly</li>
            <li>Subsequent downloads: bubble appears empty or doesn't appear</li>
            <li>Console errors or extension background script logs</li>
        </ul>
    </div>
</div>

<style>
    .test-section {
        margin: 20px 0;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
        background-color: #f9f9f9;
    }
    
    .test-button {
        margin: 10px;
        padding: 12px 24px;
        font-size: 16px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    
    .test-button:hover {
        background-color: #0056b3;
    }
    
    .auto-button {
        background-color: #dc3545;
    }
    
    .auto-button:hover {
        background-color: #c82333;
    }
    
    .instructions {
        background-color: #e9ecef;
        padding: 15px;
        border-radius: 6px;
        margin-bottom: 20px;
    }
    
    .counter {
        font-weight: bold;
        color: #007bff;
    }
</style>
